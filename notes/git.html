<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <meta name="description" content="">
    <meta name="author" content="">
    <title>导航</title>
    <link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/91xcode/static@master/91xcode.github.io/best.ico" type="image/x-icon" />
    <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/gh/91xcode/static@master/91xcode.github.io/css/gray.css" />
    <link href="https://cdn.jsdelivr.net/gh/91xcode/static@master/bootstrap-3.3.4-dist/css/bootstrap.css" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link href="https://cdn.jsdelivr.net/gh/91xcode/static@master/bootstrap-3.3.4-dist/css/offcanvas.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/gh/91xcode/static@master/bootstrap-3.3.4-dist/css/carousel.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/91xcode/static@master/bootstrap-3.3.4-dist/css/site.min.css?v5">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/91xcode/static@master/bootstrap-3.3.4-dist/js/jquery-2.1.4.js"></script>
    <style>
        table tr td a {
            color: #6F5499;
        }
        .text-white {
            color: #fff;
        }
        .octicon {
            display: inline-block;
            fill: currentColor;
            vertical-align: text-top;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-fixed-top navbar-inverse">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="https://91xcode.github.io">导航</a>
            </div>
            <div id="navbar" class="collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li><a href="https://github.com/91xcode/91xcode.github.io" target="_blank"><svg height="20" class="octicon octicon-mark-github text-white" viewBox="0 0 16 16" version="1.1" width="20" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg></a></li>
                    <li><a href="/about/index.html">关于</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="container">
        <div class="row row-offcanvas row-offcanvas-right">
            <div class="col-xs-12 col-sm-12">
                <div class="jumbotron">
                    <h3 align="center">git记录</h3>
                    <pre>
    

    (1) Git常规

    从github上clone子分支

    1.正常情况下，我们在github上看到一个clone地址，git clone xxxxxxx.git后，默认clone进入的是master分支，如果想切换到某一个子分支，可以使用

        git branch -a

        git checkout -b feature/account_list_20210810 remotes/origin/feature/account_list_20210810

    2.在本地创建和远程分支对应的分支，使用git checkout -b branch-name origin/branch-name，本地和远程分支的名称最好一致；

    3.建立本地分支和远程分支的关联，使用git branch --set-upstream branch-name origin/branch-name；



    git delete branch

    1、查看项目的分支们(包括本地和远程)
         命令行 : $ git branch -a

    2、删除本地分支

       $ git branch -d <BranchName>

    3、删除远程分支
         命令行 : $ git push origin --delete <BranchName>

    4、查看删除后分支们
         命令行 : $ git branch -a

    使用git拉代码时可以使用 -b 指定分支

    1.指定拉 master 分支代码

        git clone -b master http://gitslab.yiqing.com/declare/about.git

    2.指定拉 develop 分支代码

        git clone -b develop http://gitslab.yiqing.com/declare/about.git



    git branch -a 这条命令并没有每一次都从远程更新仓库信息，我们可以手动更新一下

        git fetch origin 
        git branch -a

        当我们删除远程分支后执行git branch -a本地却依然能看到远程分支

        这个时候我们只需要执行git remote prune origin清理一下就可以了

        然后再次执行git branch -a就看不到啦



    (2) Git修改远程仓库地址

    背景：Github 将https方式改为ssh方式，进行push与clone

    使用Git提交到Github时，若采用默认的https方式进行push与clone，则会比较慢，且对大文件容易出现报错的情况，故我们可以将其改为ssh方式

    步骤

        1.打开Github的仓库，点击code，进入显示ssh的页面

        2.到本地项目文件夹子，打开git bash。查看clone 地址：git remote -v

        3.移除https的方式 git remote rm origin

        4.添加新的git方式：ssh方式，ssh方式地址的话，在github上，切换到ssh方式，然后复制地址。

        5.git remote add origin 刚刚复制的git地址

        6.git remote -v

            看到地址是以git@github.com:开头，说明ssh方式添加成功

        7.重新push（提交一下）

            git push origin maste

        8.完成以上步骤，便由https方式改为了ssh方式。



        或者

        git修改远程仓库地址
        方法有三种：

        1.修改命令

        git remote origin set-url [url]

        先删后加

        git remote rm origin

        git remote add origin [url]

        直接修改config文件

        git文件夹，找到config，编辑，把就的项目地址替换成新的。

        顺手安利下 《git宝典—应付日常工作使用足够的指北手册》

        关于github 建议让换 Token的形势，操作如下



    (3) Git more ssh-key
    
    背景：当有多个git账号时，比如：

    a. 一个gitee，用于公司内部的工作开发；
    b. 一个github，用于自己进行一些开发活动；

    解决方法
        1.生成一个公司用的SSH-Key
            $ ssh-keygen -t rsa -C 'xxxxx@company.com' -f ~/.ssh/gitee_id_rsa
        2.生成一个github用的SSH-Key
            $ ssh-keygen -t rsa -C 'xxxxx@qq.com' -f ~/.ssh/github_id_rsa
        3.在 ~/.ssh 目录下新建一个config文件，添加如下内容（其中Host和HostName填写git服务器的域名，IdentityFile指定私钥的路径）
            # gitee
            Host gitee.com
            HostName gitee.com
            PreferredAuthentications publickey
            IdentityFile ~/.ssh/gitee_id_rsa
            # github
            Host github.com
            HostName github.com
            PreferredAuthentications publickey
            IdentityFile ~/.ssh/github_id_rsa
        4.用ssh命令分别测试

            $ ssh -T git@gitee.com
            $ ssh -T git@github.com


        或者

        1.生成一个公司用的SSH-Key
            $ ssh-keygen -t rsa -C 'xxxxx@company.com' 
        2.生成一个github用的SSH-Key
            $ ssh-keygen -t rsa -C 'xxxxx@qq.com' -f ~/.ssh/github_id_rsa
        3.在 ~/.ssh 目录下新建一个config文件，添加如下内容（其中Host和HostName填写git服务器的域名，IdentityFile指定私钥的路径）
            # github
            Host github.com
            HostName github.com
            PreferredAuthentications publickey
            IdentityFile ~/.ssh/github_id_rsa
        4.用ssh命令分别测试
            $ ssh -T git@github.com


        (4) Git操作

        ssh-key

        ssh-keygen -t rsa -C "$your_email"          # 获取 sshkey
        cat ~/.ssh/id_rsa.pub                      # 查看 sshkey



        首次使用 git

        客户端首次使用 git 提交时需要将 id_rsa.pub 内容提交到 github 上不然每次都会提示输入用户名密码

        然后输入必要的配置


        git config --global user.name wxnacy            # 配置用户名
        git config --global user.email xxx@qq.com      # 配置邮件
        git config --global push.default simple
        git push -u origin master


        初始化项目

        cd project_root                            # 进入项目目录
        git init                                    # 初始化git仓库
        git add .                                  # 添加文件到仓库
        git commit -m 'init commit'                # 提交代码到本地仓库
        git remote add origin ${repository_path}    # 将项目关联到git server
        git pull origin master                      # 同步代码
        git push origin master                      # push代码到远程仓库
        git clone ${repository_path}                # 新的位置clone项目





        删除文件

        rm -r file_path
        git rm -r ${file_path}
        git commit -m 'remove'
        git pull origin master
        git push origin master





        用户信息

        git config --global user.name wxnacy            # 配置用户名
        git config --global user.email xxx@qq.com      # 配置邮件

        $ git config user.name      # 查看登录名
        $ git config user.email    # 查看登录邮箱





        记住密码

        在服务器上 clone 代码第一次通常会提示输入密码，为了下次不再提示，可以在 clone 后做如下操作

        git config credential.helper store



        撤销操作

        重新提交

        提交后如果发现遗漏可以使用 git commit --amend 重新提交

        git commit -m 'initial commit'
        git add forgotten_file
        git commit --amend





        撤销提交文件

        git checkout -- <file>              # 取消对文件的修改。还原到最近的版本，废弃本地做的修改。
        git reset HEAD <file>...            # 取消已经暂存的文件。即，撤销先前"git add"的操作
        git reset HEAD^                    # 回退所有内容到上一个版本
        git reset HEAD^ a.py                # 回退a.py这个文件的版本到上一个版本
        git reset –soft HEAD~3              # 向前回退到第3个版本
        git reset –hard origin/master      # 将本地的状态回退到和远程的一样
        git reset 057d                      # 回退到某个版本
        git revert HEAD                    # 回退到上一次提交的状态，按照某一次的commit完全反向的进行一次commit.(代码回滚到上个版本，并提交git)
        git merge --abort                  # 撤销所有合并操作

        或者

        git -c core.quotepath=false rm --cached -f -- env.sh
        git -c core.quotepath=false checkout HEAD -- env.sh


        修改remote url

        git remote set-url origin ${new_repository_path}


        分支

        git checkout -b ${new_branch} master    # 从master创建新分支
        git checkout ${branch_name}            # 定位分支
        git checkout -b {local-branch-name} origin/{remote-branch-name} # 从远程分支创建新分支
        git merge --no-off ${branch_name}      # 将其他分支合并到master
        git rebase origin master # master分支合并到当前分支
        git pull origin {branch-name}          # 拉取远程分支



        标签

        git tag ${tag_name} master              # 创建新分支
        git push origin ${tag_name}            # 将标签推到远程仓库
        git branch -D ${branch_tag_name}        # 删除本地分支或标签
        git push origin :${branch_tag_name}    # 删除远程分支或分支





        提交检查

        在代码提前前或查看提交记录详情时可能会用到下面几组命令

        status

        git status          # 查看当前版本状态（是否修改）



        log

        git log            # 显示提交日志
        git log -1          # 显示1行日志 -n为n行
        git log --stat      # 显示提交日志及相关变动文件
        git log -p -m      # 显示提交日志及变动的详细情况
        git log v2.0        # 显示v2.0的日志


        show

        git show dfb02e6e4f2f7b573        # 显示某个提交的详细内容
        git show dfb02                    # 可只用commitid的前几位
        git show HEAD                      # 显示HEAD提交日志
        git show HEAD^                    # 显示HEAD的父（上一个版本）的提交日志 ^^为上两个版本 ^5为上5个版本
        git show v2.0                      # 显示v2.0的日志及详细内容


        diff

        git diff                                  # 显示所有未添加至index的变更
        git diff --cached                        # 显示所有已添加index但还未commit的变更
        git diff HEAD^                            # 比较与上一个版本的差异
        git diff HEAD -- ./lib                    # 比较与HEAD版本lib目录的差异
        git diff origin/master..master            # 比较远程分支master上有本地分支master上没有的
        git diff origin/master..master --stat    # 只显示差异的文件，不显示具体内容





        参考资料  http://wxnacy.com/2017/08/04/git-2017-08-04-basic-cmd/

</pre>
                </div>
            </div>
        </div>
        <!--/row-->
        <hr>
        <footer>
            <p style="text-align: center">Copyright &copy; 2021-2030 导航</p>
        </footer>
    </div>
    <!--/.container-->
    <!-- Bootstrap core JavaScript
================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
 
    <script type="text/javascript"  src="https://cdn.jsdelivr.net/gh/91xcode/static@master/bootstrap-3.3.4-dist/js/bootstrap.min.js"></script>

</body>

</html>