<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>git</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <style type="text/css">
  /* meyer reset -- http://meyerweb.com/eric/tools/css/reset/ , v2.0 | 20110126 | License: none (public domain) */

  @include-when-export url(https://fonts.loli.net/css?family=PT+Serif:400,400italic,700,700italic&subset=latin,cyrillic-ext,cyrillic,latin-ext);

  /* =========== */

  /* pt-serif-regular - latin */
  @font-face {
    font-family: 'PT Serif';
    font-style: normal;
    font-weight: normal;
  	src: local('PT Serif'), local('PTSerif-Regular'), url('./newsprint/pt-serif-v11-latin-regular.woff2') format('woff2');
  	unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
  }
  /* pt-serif-italic - latin */
  @font-face {
    font-family: 'PT Serif';
    font-style: italic;
    font-weight: normal;
  	src: local('PT Serif Italic'), local('PTSerif-Italic'), url('./newsprint/pt-serif-v11-latin-italic.woff2') format('woff2');
  	unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
  }
  /* pt-serif-700 - latin */
  @font-face {
    font-family: 'PT Serif';
    font-style: normal;
    font-weight: bold;
  	src: local('PT Serif Bold'), local('PTSerif-Bold'), url('./newsprint/pt-serif-v11-latin-700.woff2') format('woff2');
  	unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
  }
  /* pt-serif-700italic - latin */
  @font-face {
    font-family: 'PT Serif';
    font-style: italic;
    font-weight: bold;
  	src: local('PT Serif Bold Italic'), local('PTSerif-BoldItalic'), url('./newsprint/pt-serif-v11-latin-700italic.woff2') format('woff2');
  	unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
  }

  :root {
  	--active-file-bg-color: #dadada;
  	--active-file-bg-color: rgba(32, 43, 51, 0.63);
  	--active-file-text-color: white;
  	--bg-color: #f3f2ee;
  	--text-color: #1f0909;
  	--control-text-color: #444;
  	--rawblock-edit-panel-bd: #e5e5e5;

  	--select-text-bg-color: rgba(32, 43, 51, 0.63);
    --select-text-font-color: white;
  }

  pre {
  	--select-text-bg-color: #36284e;
  	--select-text-font-color: #fff;
  }

  html {
  	font-size: 16px;
  	-webkit-font-smoothing: antialiased;
  }

  html, body {
  	background-color: #f3f2ee;
  	font-family: "PT Serif", 'Times New Roman', Times, serif;
  	color: #1f0909;
  	line-height: 1.5em;
  }

  /*#write {
  	overflow-x: auto;
      max-width: initial;
  	padding-left: calc(50% - 17em);
      padding-right: calc(50% - 17em);
  }

  @media (max-width: 36em) {
   	#write {
   		padding-left: 1em;
      	padding-right: 1em;
   	}
  }*/

  #write {
  	max-width: 40em;
  }

  @media only screen and (min-width: 1400px) {
  	#write {
  			max-width: 914px;
  	}
  }

  ol li {
  	list-style-type: decimal;
  	list-style-position: outside;
  }
  ul li {
  	list-style-type: disc;
  	list-style-position: outside;
  }

  ol,
  ul {
  	list-style: none;
  }

  blockquote,
  q {
  	quotes: none;
  }
  blockquote:before,
  blockquote:after,
  q:before,
  q:after {
  	content: '';
  	content: none;
  }
  table {
  	border-collapse: collapse;
  	border-spacing: 0;
  }
  /* styles */

  /* ====== */

  /* headings */

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
  	font-weight: bold;
  }
  h1 {
  	font-size: 1.875em;
  	/*30 / 16*/
  	line-height: 1.6em;
  	/* 48 / 30*/
  	margin-top: 2em;
  }
  h2,
  h3 {
  	font-size: 1.3125em;
  	/*21 / 16*/
  	line-height: 1.15;
  	/*24 / 21*/
  	margin-top: 2.285714em;
  	/*48 / 21*/
  	margin-bottom: 1.15em;
  	/*24 / 21*/
  }
  h3 {
  	font-weight: normal;
  }
  h4 {
  	font-size: 1.125em;
  	/*18 / 16*/
  	margin-top: 2.67em;
  	/*48 / 18*/
  }
  h5,
  h6 {
  	font-size: 1em;
  	/*16*/
  }
  h1 {
  	border-bottom: 1px solid;
  	margin-bottom: 1.875em;
  	padding-bottom: 0.8125em;
  }
  /* links */

  a {
  	text-decoration: none;
  	color: #065588;
  }
  a:hover,
  a:active {
  	text-decoration: underline;
  }
  /* block spacing */

  p,
  blockquote,
  .md-fences {
  	margin-bottom: 1.5em;
  }
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
  	margin-bottom: 1.5em;
  }
  /* blockquote */

  blockquote {
  	font-style: italic;
  	border-left: 5px solid;
  	margin-left: 2em;
  	padding-left: 1em;
  }
  /* lists */

  ul,
  ol {
  	margin: 0 0 1.5em 1.5em;
  }
  /* tables */
  .md-meta,.md-before, .md-after {
  	color:#999;
  }

  table {
  	margin-bottom: 1.5em;
  	/*24 / 16*/
  	font-size: 1em;
  	/* width: 100%; */
  }
  thead th,
  tfoot th {
  	padding: .25em .25em .25em .4em;
  	text-transform: uppercase;
  }
  th {
  	text-align: left;
  }
  td {
  	vertical-align: top;
  	padding: .25em .25em .25em .4em;
  }

  code,
  .md-fences {
  	background-color: #dadada;
  }

  code {
  	padding-left: 2px;
  	padding-right: 2px;
  }

  .md-fences {
  	margin-left: 2em;
  	margin-bottom: 3em;
  	padding-left: 1ch;
  	padding-right: 1ch;
  }

  pre,
  code,
  tt {
  	font-size: .875em;
  	line-height: 1.714285em;
  }
  /* some fixes */

  h1 {
  	line-height: 1.3em;
  	font-weight: normal;
  	margin-bottom: 0.5em;
  }

  p + ul,
  p + ol{
  	margin-top: .5em;
  }

  h3 + ul,
  h4 + ul,
  h5 + ul,
  h6 + ul,
  h3 + ol,
  h4 + ol,
  h5 + ol,
  h6 + ol {
  	margin-top: .5em;
  }

  li > ul,
  li > ol {
  	margin-top: inherit;
  	margin-bottom: 0;
  }

  li ol>li {
  	list-style-type: lower-alpha;
  }

  li li ol>li{
  	list-style-type: lower-roman;
  }

  h2,
  h3 {
  	margin-bottom: .75em;
  }
  hr {
  	border-top: none;
  	border-right: none;
  	border-bottom: 1px solid;
  	border-left: none;
  }
  h1 {
  	border-color: #c5c5c5;
  }
  blockquote {
  	border-color: #bababa;
  	color: #656565;
  }

  blockquote ul,
  blockquote ol {
  	margin-left:0;
  }

  .ty-table-edit {
  	background-color: transparent;
  }
  thead {
  	background-color: #dadada;
  }
  tr:nth-child(even) {
  	background: #e8e7e7;
  }
  hr {
  	border-color: #c5c5c5;
  }
  .task-list{
  	padding-left: 1rem;
  }

  .md-task-list-item {
  	padding-left: 1.5rem;
  	list-style-type: none;
  }

  .md-task-list-item > input:before {
  	content: '\221A';
  	display: inline-block;
  	width: 1.25rem;
    	height: 1.6rem;
  	vertical-align: middle;
  	text-align: center;
  	color: #ddd;
  	background-color: #F3F2EE;
  }

  .md-task-list-item > input:checked:before,
  .md-task-list-item > input[checked]:before{
  	color: inherit;
  }

  #write pre.md-meta-block {
  	min-height: 1.875rem;
  	color: #555;
  	border: 0px;
  	background: transparent;
  	margin-top: -4px;
  	margin-left: 1em;
  	margin-top: 1em;
  }

  .md-image>.md-meta {
  	color: #9B5146;
  }

  .md-image>.md-meta{
  	font-family: Menlo, 'Ubuntu Mono', Consolas, 'Courier New', 'Microsoft Yahei', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', serif;
  }


  #write>h3.md-focus:before{
  	left: -1.5rem;
  	color:#999;
  	border-color:#999;
  }
  #write>h4.md-focus:before{
  	left: -1.5rem;
  	top: .25rem;
  	color:#999;
  	border-color:#999;
  }
  #write>h5.md-focus:before{
  	left: -1.5rem;
  	top: .0.3125rem;
  	color:#999;
  	border-color:#999;
  }
  #write>h6.md-focus:before{
  	left: -1.5rem;
  	top: 0.3125rem;
  	color:#999;
  	border-color:#999;
  }

  .md-toc:focus .md-toc-content{
  	margin-top: 19px;
  }

  .md-toc-content:empty:before{
  	color: #065588;
  }
  .md-toc-item {
  	color: #065588;
  }
  #write div.md-toc-tooltip {
  	background-color: #f3f2ee;
  }

  #typora-sidebar {
  	background-color: #f3f2ee;
  	-webkit-box-shadow: 0 6px 12px rgba(0, 0, 0, 0.375);
    	box-shadow: 0 6px 12px rgba(0, 0, 0, 0.375);
  }

  .pin-outline #typora-sidebar {
  	background: inherit;
  	box-shadow: none;
  	border-right: 1px dashed;
  }

  .pin-outline #typora-sidebar:hover .outline-title-wrapper {
  	border-left:1px dashed;
  }

  .outline-item:hover {
    background-color: #dadada;
    border-left: 28px solid #dadada;
    border-right: 18px solid #dadada;
  }

  .typora-node .outline-item:hover {
    	border-right: 28px solid #dadada;
  }

  .outline-expander:before {
    content: "\f0da";
    font-family: FontAwesome;
    font-size:14px;
    top: 1px;
  }

  .outline-expander:hover:before,
  .outline-item-open>.outline-item>.outline-expander:before {
    content: "\f0d7";
  }

  .modal-content {
  	background-color: #f3f2ee;
  }

  .auto-suggest-container ul li {
  	list-style-type: none;
  }

  /** UI for electron */

  .megamenu-menu,
  #top-titlebar, #top-titlebar *,
  .megamenu-content {
  	background: #f3f2ee;
  	color: #1f0909;
  }

  .megamenu-menu-header {
  	border-bottom: 1px dashed #202B33;
  }

  .megamenu-menu {
  	box-shadow: none;
  	border-right: 1px dashed;
  }

  header, .context-menu, .megamenu-content, footer {
  	font-family: "PT Serif", 'Times New Roman', Times, serif;
      color: #1f0909;
  }

  #megamenu-back-btn {
  	color: #1f0909;
  	border-color: #1f0909;
  }

  .megamenu-menu-header #megamenu-menu-header-title:before {
  	color: #1f0909;
  }

  .megamenu-menu-list li a:hover, .megamenu-menu-list li a.active {
  	color: inherit;
  	background-color: #e8e7df;
  }

  .long-btn:hover {
  	background-color: #e8e7df;
  }

  #recent-file-panel tbody tr:nth-child(2n-1) {
      background-color: transparent !important;
  }

  .megamenu-menu-panel tbody tr:hover td:nth-child(2) {
      color: inherit;
  }

  .megamenu-menu-panel .btn {
  	background-color: #D2D1D1;
  }

  .btn-default {
  	background-color: transparent;
  }

  .typora-sourceview-on #toggle-sourceview-btn,
  .ty-show-word-count #footer-word-count {
  	background: #c7c5c5;
  }

  #typora-quick-open {
      background-color: inherit;
  }

  .md-diagram-panel {
  	margin-top: 8px;
  }

  .file-list-item-file-name {
  	font-weight: initial;
  }

  .file-list-item-summary {
  	opacity: 1;
  }

  .file-list-item {
  	color: #777;
  }

  .file-list-item.active {
  	background-color: inherit;
  	color: black;
  }

  .ty-side-sort-btn.active {
  	background-color: inherit;
  }

  .file-list-item.active .file-list-item-file-name  {
  	font-weight: bold;
  }

  .file-list-item{
      opacity:1 !important;
  }

  .file-library-node.active>.file-node-background{
  	background-color: rgba(32, 43, 51, 0.63);
  	background-color: var(--active-file-bg-color);
  }

  .file-tree-node.active>.file-node-content{
  	color: white;
  	color: var(--active-file-text-color);
  }

  .md-task-list-item>input {
  	margin-left: -1.7em;
  	margin-top: calc(1rem - 12px);
  	-webkit-appearance: button;
  }

  input {
  	border: 1px solid #aaa;
  }

  .megamenu-menu-header #megamenu-menu-header-title,
  .megamenu-menu-header:hover, 
  .megamenu-menu-header:focus {
  	color: inherit;
  }

  .dropdown-menu .divider {
  	border-color: #e5e5e5;
  	opacity: 1;
  }

  /* https://github.com/typora/typora-issues/issues/2046 */
  .os-windows-7 strong,
  .os-windows-7 strong  {
  	font-weight: 760;
  }

  .ty-preferences .btn-default {
  	background: transparent;
  }

  .ty-preferences .window-header {
  	border-bottom: 1px dashed #202B33;
  	box-shadow: none;
  }

  #sidebar-loading-template, #sidebar-loading-template.file-list-item {
  	color: #777;
  }

  .searchpanel-search-option-btn.active {
  	background: #777;
  	color: white;
  }

  .export-detail, .light .export-detail, 
  .light .export-item.active, 
  .light .export-items-list-control {
  	background: #e0e0e0;
  	border-radius: 2px;
  	font-weight: 700;
  	color: inherit
  }
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="git">git</h1>
<h2 id="需求">需求</h2>
<blockquote>
<p>git日常使用备注</p>
</blockquote>
<h2 id="步骤">步骤</h2>
<h3 id="git生成ssh-key">Git生成ssh-key</h3>
<pre><code>ssh-key

ssh-keygen -t rsa -C &quot;$your_email&quot;          # 获取 sshkey
cat ~/.ssh/id_rsa.pub                      # 查看 sshkey</code></pre>
<h3 id="协作与分支推送">协作与分支推送</h3>
<pre><code>1.正常情况下，我们在github上看到一个clone地址，git clone xxxxxxx.git后，默认clone进入的是master分支，如果想切换到某一个子分支，可以使用

git branch -a

git checkout -b feature/account_list_20210810 remotes/origin/feature/account_list_20210810

2.在本地创建和远程分支对应的分支，使用git checkout -b branch-name origin/branch-name，本地和远程分支的名称最好一致；

3.建立本地分支和远程分支的关联，使用git branch --set-upstream branch-name origin/branch-name；或者  git branch --set-upstream-to=origin/branch-name

git提示--set-upstream过时了。

4.git 怎么拉去指定分支的代码

git clone -b 分支名 仓库地址

5.比较2个分支指定某个文件的区别

git diff master liubing1_dev_v3 -p  app/Services/CustomerPayService.php

6.文件撤销修改恢复到远端master

git checkout origin/master -- filename.txt</code></pre>
<h3 id="使用git拉代码时可以使用--b-指定分支">使用git拉代码时可以使用 -b
指定分支</h3>
<pre><code>1.指定拉 master 分支代码

git clone -b master http://gitslab.yiqing.com/declare/about.git

2.指定拉 develop 分支代码

git clone -b develop http://gitslab.yiqing.com/declare/about.git



git branch -a 这条命令并没有每一次都从远程更新仓库信息，我们可以手动更新一下

git fetch origin 
git branch -a

当我们删除远程分支后执行git branch -a本地却依然能看到远程分支

这个时候我们只需要执行git remote prune origin清理一下就可以了

然后再次执行git branch -a就看不到啦</code></pre>
<h3 id="git-代码冲突常见解决方法">git-代码冲突常见解决方法</h3>
<pre><code>1) 在合并过程中不能做部分提交

git commit -im &quot;commit message&quot; xx

2)错误提示fatal: Paths with -a does not make sense.
git commit -am &quot;注释（提交）说明&quot;&quot;

3) 某个文件恢复到指定分支的版本

git checkout branch_name -- filename

4) 比较2个分支的指定文件

git diff branch_name1 branch_name2 具体文件路径</code></pre>
<h3 id="查看日志-需要配置-git-lss">查看日志 需要配置 git lss</h3>
<pre><code>git config --global alias.ls &quot;log --no-merges --color --graph --date=format:&#39;%Y-%m-%d %H:%M:%S&#39; --pretty=format:&#39;%Cred%h%Creset -%C(yellow)%d%Cblue %s %Cgreen(%cd) %C(bold blue)&lt;%an&gt;%Creset&#39; --abbrev-commit&quot;

git config --global alias.lss &quot;log --no-merges --color --stat --graph --date=format:&#39;%Y-%m-%d %H:%M:%S&#39; --pretty=format:&#39;%Cred%h%Creset -%C(yellow)%d%Cblue %s %Cgreen(%cd) %C(bold blue)&lt;%an&gt;%Creset&#39; --abbrev-commit&quot;

查看指定成员 以及commit 含有的字符串
git lss --author liubing1 --grep &#39;销售&#39; -p

git lss --author liubing1
</code></pre>
<h3 id="git-delete-branch">git delete branch</h3>
<pre><code>
1、查看项目的分支们(包括本地和远程)
     命令行 : $ git branch -a

2、删除本地分支

   git branch -d branch-name

3、删除远程分支
    git push origin :branch-name

4、查看删除后分支们
     命令行 : $ git branch -a
</code></pre>
<h3 id="git-文件太大-克隆失败的解决方法">git 文件太大
克隆失败的解决方法</h3>
<pre><code>当使用git clone 产生这个问题的时候，在第一次克隆的时候，把克隆深度设置为1，然后再fetch

git clone  https://example.com/example/example.git --depth  1
cd example
git fetch --unshallow</code></pre>
<h3 id="git-diff结果解读">git diff结果解读</h3>
<pre><code>diff –git a/f1 b/f1 //a版本的f1（变动前） 与 b版本的f1（变动后） 比较
index6f8a38c..449b072 100644 //a版本的在index的对象的哈希值 b版本在工作区的对象的哈希值 文件信息（644表示权限）

- a/f1 //变动前的文件
+++ b/f1 //变动后的文件
@@ -1,7 +1,7 @@ //变动前的文件从第一行开始的7行 与 变动后的文件第一行开始的7行存在不同
//以下是比较信息 一行前面有- + ！或者没有表示，分别表示删、增、改、没有修改。</code></pre>
<h3 id="git冲突标记">git冲突标记</h3>
<pre><code>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD 是指你本地的分支的
------------

如下：
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
b789
=======
b45678910
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 6853e5ff961e684d3a6c02d4d06183b5ff330dcc

head 到 =======里面的b789是您的commit的内容

=========到 &gt;&gt;&gt;&gt;68的是您下拉的内容</code></pre>
<h3 id="git修改远程仓库地址">Git修改远程仓库地址</h3>
<pre><code>

背景：Github 将https方式改为ssh方式，进行push与clone

使用Git提交到Github时，若采用默认的https方式进行push与clone，则会比较慢，且对大文件容易出现报错的情况，故我们可以将其改为ssh方式

步骤

1.打开Github的仓库，点击code，进入显示ssh的页面

2.到本地项目文件夹子，打开git bash。查看clone 地址：git remote -v

3.移除https的方式 git remote rm origin

4.添加新的git方式：ssh方式，ssh方式地址的话，在github上，切换到ssh方式，然后复制地址。

5.git remote add origin 刚刚复制的git地址

6.git remote -v

看到地址是以git@github.com:开头，说明ssh方式添加成功

7.重新push（提交一下）

git push origin maste

8.完成以上步骤，便由https方式改为了ssh方式。
</code></pre>
<h3 id="git-more-ssh-key">Git more ssh-key</h3>
<pre><code>
背景：当有多个git账号时，比如：

a. 一个gitee，用于公司内部的工作开发；
b. 一个github，用于自己进行一些开发活动；

解决方法
    1.生成一个公司用的SSH-Key
        $ ssh-keygen -t rsa -C &#39;xxxxx@company.com&#39; -f ~/.ssh/gitee_id_rsa
    2.生成一个github用的SSH-Key
        $ ssh-keygen -t rsa -C &#39;xxxxx@qq.com&#39; -f ~/.ssh/github_id_rsa
    3.在 ~/.ssh 目录下新建一个config文件，添加如下内容（其中Host和HostName填写git服务器的域名，IdentityFile指定私钥的路径）
        # gitee
        Host gitee.com
        HostName gitee.com
        PreferredAuthentications publickey
        IdentityFile ~/.ssh/gitee_id_rsa
        # github
        Host github.com
        HostName github.com
        PreferredAuthentications publickey
        IdentityFile ~/.ssh/github_id_rsa
    4.用ssh命令分别测试

        $ ssh -T git@gitee.com
        $ ssh -T git@github.com


    或者
    
    1.生成一个公司用的SSH-Key
        $ ssh-keygen -t rsa -C &#39;xxxxx@company.com&#39; 
    2.生成一个github用的SSH-Key
        $ ssh-keygen -t rsa -C &#39;xxxxx@qq.com&#39; -f ~/.ssh/github_id_rsa
    3.在 ~/.ssh 目录下新建一个config文件，添加如下内容（其中Host和HostName填写git服务器的域名，IdentityFile指定私钥的路径）
        # github
        Host github.com
        HostName github.com
        PreferredAuthentications publickey
        IdentityFile ~/.ssh/github_id_rsa
    4.用ssh命令分别测试
        $ ssh -T git@github.com
</code></pre>
<pre><code>(4) Git操作

ssh-key

ssh-keygen -t rsa -C &quot;$your_email&quot;          # 获取 sshkey
cat ~/.ssh/id_rsa.pub                      # 查看 sshkey</code></pre>
<h3 id="子模块">子模块</h3>
<pre><code>git submodule foreach git pull    子模块更新</code></pre>
<h3 id="首次使用-git">首次使用 git</h3>
<pre><code>客户端首次使用 git 提交时需要将 id_rsa.pub 内容提交到 github 上不然每次都会提示输入用户名密码

然后输入必要的配置


git config --global user.name wxnacy            # 配置用户名
git config --global user.email xxx@qq.com      # 配置邮件
git config --global push.default simple
git push -u origin master


初始化项目

cd project_root                            # 进入项目目录
git init                                    # 初始化git仓库
git add .                                  # 添加文件到仓库
git commit -m &#39;init commit&#39;                # 提交代码到本地仓库
git remote add origin ${repository_path}    # 将项目关联到git server
git pull origin master                      # 同步代码
git push origin master                      # push代码到远程仓库
git clone ${repository_path}                # 新的位置clone项目





删除文件

rm -r file_path
git rm -r ${file_path}
git commit -m &#39;remove&#39;
git pull origin master
git push origin master





用户信息

git config --global user.name wxnacy            # 配置用户名
git config --global user.email xxx@qq.com      # 配置邮件

$ git config user.name      # 查看登录名
$ git config user.email    # 查看登录邮箱





记住密码

在服务器上 clone 代码第一次通常会提示输入密码，为了下次不再提示，可以在 clone 后做如下操作

git config credential.helper store



撤销操作

重新提交

提交后如果发现遗漏可以使用 git commit --amend 重新提交

git commit -m &#39;initial commit&#39;
git add forgotten_file
git commit --amend





撤销提交文件

git checkout --               # 取消对文件的修改。还原到最近的版本，废弃本地做的修改。
git reset HEAD ...            # 取消已经暂存的文件。即，撤销先前&quot;git add&quot;的操作
git reset HEAD^                    # 回退所有内容到上一个版本
git reset HEAD^ a.py                # 回退a.py这个文件的版本到上一个版本
git reset –soft HEAD~3              # 向前回退到第3个版本
git reset –hard origin/master      # 将本地的状态回退到和远程的一样
git reset 057d                      # 回退到某个版本
git revert HEAD                    # 回退到上一次提交的状态，按照某一次的commit完全反向的进行一次commit.(代码回滚到上个版本，并提交git)
git merge --abort                  # 撤销所有合并操作

或者

git -c core.quotepath=false rm --cached -f -- env.sh
git -c core.quotepath=false checkout HEAD -- env.sh


修改remote url

git remote set-url origin ${new_repository_path}


分支

git checkout -b ${new_branch} master    # 从master创建新分支
git checkout ${branch_name}            # 定位分支
git checkout -b {local-branch-name} origin/{remote-branch-name} # 从远程分支创建新分支
git merge --no-off ${branch_name}      # 将其他分支合并到master
git rebase origin master # master分支合并到当前分支
git pull origin {branch-name}          # 拉取远程分支



标签

git tag ${tag_name} master              # 创建新分支
git push origin ${tag_name}            # 将标签推到远程仓库
git branch -D ${branch_tag_name}        # 删除本地分支或标签
git push origin :${branch_tag_name}    # 删除远程分支或分支





提交检查

在代码提前前或查看提交记录详情时可能会用到下面几组命令

status

git status          # 查看当前版本状态（是否修改）



log

git log            # 显示提交日志
git log -1          # 显示1行日志 -n为n行
git log --stat      # 显示提交日志及相关变动文件
git log -p -m      # 显示提交日志及变动的详细情况
git log v2.0        # 显示v2.0的日志


show

git show dfb02e6e4f2f7b573        # 显示某个提交的详细内容
git show dfb02                    # 可只用commitid的前几位
git show HEAD                      # 显示HEAD提交日志
git show HEAD^                    # 显示HEAD的父（上一个版本）的提交日志 ^^为上两个版本 ^5为上5个版本
git show v2.0                      # 显示v2.0的日志及详细内容


diff

git diff                                  # 显示所有未添加至index的变更
git diff --cached                        # 显示所有已添加index但还未commit的变更
git diff HEAD^                            # 比较与上一个版本的差异
git diff HEAD -- ./lib                    # 比较与HEAD版本lib目录的差异
git diff origin/master..master            # 比较远程分支master上有本地分支master上没有的
git diff origin/master..master --stat    # 只显示差异的文件，不显示具体内容







新建代码库

    # 在当前目录新建一个Git代码库
    $ git init

    # 新建一个目录，将其初始化为Git代码库
    $ git init [project-name]

    # 下载一个项目和它的整个代码历史
    $ git clone [url]

配置 config

    --global 代表全局变量
    # 显示当前的Git配置
    $ git config --list

    # 设置提交代码时的用户信息
    $ git config [--global] user.name &quot;[name]&quot;
    $ git config [--global] user.email &quot;[email address]&quot;

git add 添加
    # 添加指定文件到暂存区
    $ git add [file1] [file2] ...

    # 添加指定目录到暂存区，包括子目录
    $ git add [dir]

    # 添加当前目录的所有文件到暂存区
    $ git add .

    # 添加每个变化前，可以查看确认变化
    # 对于同一个文件的多处变化，可以实现分次提交
    $ git add -p

git rm 删除
    # 停止追踪指定文件，但该文件会保留在工作区
    $ git rm -r --cached [file]

git mv 改名
    # 改名文件，并且将这个改名放入暂存区
    $ git mv [file-original] [file-renamed]

git commit 提交

    # 提交暂存区到仓库区
    $ git commit -m [message]

    # 提交暂存区的指定文件到仓库区
    $ git commit [file1] [file2] ... -m [message]

    # 提交时显示所有diff信息
    $ git commit -v

    # 使用一次新的commit，替代上一次提交
    # 如果代码没有任何新变化，则用来改写上一次commit的提交信息
    $ git commit --amend -m [message]

    # 重做上一次commit，并包括指定文件的新变化
    $ git commit --amend [file1] [file2] ...

git branch 分支

    # 列出所有本地分支
    $ git branch

    # 列出所有远程分支
    $ git branch -r

    # 列出所有本地分支和远程分支
    $ git branch -a

    # 列出本地分支追踪的远程分支
    $ git branch -vv

    # 切换到指定分支，并更新工作区
    $ git checkout [branch-name]

    # 切换到上一个分支
    $ git checkout -

–set-upstream --track 建立追踪

    $ git branch --set-upstream [branch] [remote-branch]
    # 本地分支追踪远端dev分支
    $ git branch --set-upstream-to=origin/dev

    # 新建一个分支，与指定的远程分支建立追踪关系
    $ git branch --track [branch] [remote/branch]


新建分支

    # 新建一个分支，但依然停留在当前分支
    $ git branch [branch-name]

    # 新建一个分支，并切换到该分支
    $ git checkout -b [branch]

    # 新建一个分支，指向指定commit
    $ git branch [branch] [commit]

merge cherry-pick 合并

    # 合并指定分支到当前分支
    $ git merge [branch]

    # 选择一个commit，合并进当前分支
    $ git cherry-pick [commit]

删除分支

    # 删除分支
    $ git branch -d [branch-name]

    # 删除远程分支
    $ git push origin :branch-name

更改远端仓库

    $ git remote set-url origin git@github.com:youzi-yun/miniORM_Flask.git

合并 commit

    $ git reset --soft HEAD~1
    $ git commmit --amend

git tag

    # 列出所有tag
    $ git tag

    # 新建一个tag在当前commit
    $ git tag [tag]

    # 新建一个tag在指定commit
    $ git tag [tag] [commit]

    # 删除本地tag
    $ git tag -d [tag]

    # 删除远程tag
    $ git push origin :refs/tags/[tagName]

    # 查看tag信息
    $ git show [tag]

    # 提交指定tag
    $ git push [remote] [tag]

    # 提交所有tag
    $ git push [remote] --tags

    # 新建一个分支，指向某个tag
    $ git checkout -b [branch] [tag]

    #删除所有本地tag
    git tag -l | xargs git tag -d 

查看信息

    # 显示有变更的文件
    $ git status

    # 显示当前分支的版本历史
    $ git log

    # 显示commit历史，以及每次commit发生变更的文件
    $ git log --stat

    # 显示某个commit之后的所有变动，每个commit占据一行
    $ git log [tag] HEAD --pretty=format:%s

    # 显示某个commit之后的所有变动，其&quot;提交说明&quot;必须符合搜索条件
    $ git log [tag] HEAD --grep feature

    # 显示某个文件的版本历史，包括文件改名
    $ git log --follow [file]
    $ git whatchanged [file]

    # 显示指定文件相关的每一次diff
    $ git log -p [file]

    # 显示过去5次提交
    $ git log -5 --pretty --oneline

    # 显示所有提交过的用户，按提交次数排序
    $ git shortlog -sn

    # 显示指定文件是什么人在什么时间修改过
    $ git blame [file]

    # 显示暂存区和工作区的差异
    $ git diff

    # 显示暂存区和上一个commit的差异
    $ git diff --cached [file]

    # 显示工作区与当前分支最新commit之间的差异
    $ git diff HEAD

    # 显示两次提交之间的差异
    $ git diff [first-branch]...[second-branch]

    # 显示今天你写了多少行代码
    $ git diff --shortstat &quot;@{0 day ago}&quot;

    # 显示某次提交的元数据和内容变化
    $ git show [commit]

    # 显示某次提交发生变化的文件
    $ git show --name-only [commit]

    # 显示某次提交时，某个文件的内容
    $ git show [commit]:[filename]

    # 显示当前分支的最近几次提交
    $ git reflog

远程同步

    # 下载远程仓库的所有变动
    $ git fetch [remote]

    #从远程拉取所有信息
    git fetch origin --prune

    # 显示所有远程仓库
    $ git remote -v

    # 显示某个远程仓库的信息
    $ git remote show [remote]

    # 增加一个新的远程仓库，并命名
    $ git remote add [shortname] [url]

    # 取回远程仓库的变化，并与本地分支合并
    $ git pull [remote] [branch]

    # 上传本地指定分支到远程仓库
    $ git push [remote] [branch]

    # 强行推送当前分支到远程仓库，即使有冲突
    $ git push [remote] --force

    # 推送所有分支到远程仓库
    $ git push [remote] --all

git checkout 撤销

    # 恢复暂存区的指定文件到工作区
    $ git checkout [file]

    # 恢复某个commit的指定文件到暂存区,git log 不变
    $ git checkout [commit号] [file]

    # 撤销所有修改（未add）
    $ git checkout .

    # 撤销指定文件修改（未add）
    $ git checkout -- [file]

git reset 重置

    # 重置暂存区的指定文件，与上一次commit保持一致，但工作区不变
    $ git reset [file]

    # 重置暂存区与工作区，与上一次commit保持一致
    $ git reset --hard

    # 重置当前分支的指针为指定commit，同时重置暂存区，但工作区不变
    $ git reset [commit]

    # 重置当前分支的HEAD为指定commit，同时重置暂存区和工作区，与指定commit一致
    $ git reset --hard [commit]

    # 重置当前HEAD为指定commit，但保持暂存区和工作区不变
    $ git reset --keep [commit]

    # 新建一个commit，用来撤销指定commit
    # 后者的所有变化都将被前者抵消，并且应用到当前分支
    $ git revert [commit]

git stash 缓存

    # 将修改的内容放入缓存区，可以切分支
    $ git stash

    # 取出缓存区中stash{0}的内容，并删除缓存区的文件
    $ git stash pop stash@{0}

    # 恢复到以前的工作状态
    $ git stash apply

    # 查看当前stash情况
    $ git stash list

    $ git stash apply stash@{1} 命令来使用在队列中的任意一个&#39;储藏&#39;(stashes).

    # 清空这个队列
    $ git stash clear
</code></pre>
</body>
</html>
