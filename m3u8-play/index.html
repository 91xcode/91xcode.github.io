<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge，chrome=1">
    <link rel="stylesheet" type="text/css" href="https://cdn.bootcss.com/amazeui/2.7.2/css/amazeui.flat.min.css">
    <!-- <link rel="stylesheet" type="text/css" href="/css/public.css?v=200416"> -->
    <link rel="shortcut icon" href="https://qnoss.lanlanlife.com/07c0549dbae43a31c377e4b06e145b08_128x128.png" />
    <link rel="apple-touch-icon" href="https://thirdqq.qlogo.cn/g?b=sdk&k=fXJhGbvrIeja8vD6FckWXA&s=640">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <title>M3U8在线播放器 - 刘明野的工具箱</title>
    <meta name="keywords" content="M3U8在线播放,M3U8播放器,M3U8直播源,M3U8在线测试">
    <meta name="description" content="M3U8在线播放器">
    <!--   <link rel="stylesheet" type="text/css" href="css/main.css?0405"> -->
    <style type="text/css">
    .input-div {
        width: 100%;
        padding: 0 0 20px 0
    }

    .s-input {
        border-right: 0;
        border-radius: 0;
    }

    .am-btn-default:focus,
    .am-btn-default:hover,
    .am-dropdown.am-active .am-btn-default.am-dropdown-toggle {
        border-color: #0e90d2;
        background-color: #eee;
    }

    .start {
        float: right;
        margin-top: -38px
    }

    #player {
        margin-bottom: .3em;
        height: 548px;
        width: 100%
    }
    </style>
    <meta name="referrer" content="never">
</head>

<body>
    <header class="am-topbar am-topbar-inverse">
        <div class="am-container">
            <p class="am-topbar-brand"><a href="./" class="am-topbar-logo">M3U8</a></p>
            <a class="am-topbar-btn am-topbar-toggle am-btn am-btn-sm am-btn-success am-show-sm-only" data-am-collapse="{target: '#doc-topbar-collapse'}"><span class="am-sr-only">导航</span> <span class="am-icon-bars"></span></a>
            <div class="am-collapse am-topbar-collapse" id="doc-topbar-collapse">
                <ul class="am-nav am-nav-pills am-topbar-nav">
                    <li><a href="/">首页</a></li>
                </ul>
                <div class="am-topbar-right">
                    <a class="am-btn am-btn-primary am-topbar-btn am-btn-sm" data-am-modal="{target: '#fenxiang'}">分享</a>
                </div>
            </div>
        </div>
    </header>
    <div class="am-container">
        <div class="logo">m3u8在线播放器</div>
        <div class="am-u-lg-6 input-div">
            <form method="post" id="str-post" class="am-input-group am-input-group-primary">
                <input type="text" name="url" placeholder="请输入m3u8播放地址" autocomplete="off" class="am-form-field s-input">
                <span class="am-input-group-btn">
                    <button class="am-btn am-btn-primary" type="submit"><span class="am-icon-play"></span></button>
                </span>
            </form>
        </div>
        <video id="player" controls=""></video>
        <div class="am-text-right">
            <a class="am-btn am-btn-primary am-round" data-am-modal="{target: '#fenxiang'}"><i class="am-icon-share-alt"></i> 分享</a>
        </div>
        <div class="am-alert am-alert-secondary">
            <p>M3U8文件格式
                M3U8文件是指UTF-8编码格式的M3U8文件。M3U8文件是记录了一个索引纯文本文件，打开它时播放软件并不是播放它，而是根据它的索引找到对应的音视频文件的网络地址进行在线播放。<br>M3U8是一种播放多媒体列表的文件格式，它的设计初衷是为了播放音频文件，比如MP3，但是越来越多的软件现在用来播放视频文件列表，M3U8也可以指定在线流媒体音频源。很多播放器和软件都支持M3U8文件格式。</p>
        </div>
    </div>
    <footer>
        <div class="am-container">
            <p><span class="intro-siteinfo">♪(^∇^*) 一言加载中...</span><br>
                资源来源于网络，如有侵权，请联系本人予以删除！<br>
                <!-- <span id="busuanzi_container_site_pv">访问量<span id="busuanzi_value_site_pv"></span>次</span>，访客数<span id="busuanzi_value_site_uv"></span>人次<br> -->
                © 2015 - 2021</p>
        </div>
    </footer>
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/amazeui/2.7.2/js/amazeui.min.js"></script>
    <script src="https://cdn.bootcss.com/hls.js/0.14.17/hls.min.js"></script>
    <script>
    function playM3u8(url) {
        if (Hls.isSupported()) {
            var video = document.getElementById('player');
            video.volume = 1.0;
            var hls = new Hls();
            var m3u8Url = decodeURIComponent(url)
            hls.loadSource(m3u8Url);
            hls.attachMedia(video);
            hls.on(Hls.Events.MANIFEST_PARSED, function() {
                video.play();
            });
        }
    }
    var uri = window.location.href.split("#")[1];
    if (uri != null) {
        $('.s-input').val(uri)
        playM3u8(uri)
        setTimeout(function() {
            $("html,body").animate({
                scrollTop: $(".input-div").offset().top - 20
            }, 200);
        }, 3000);
    }
    $("#str-post").submit(function() {
        $("html,body").animate({
            scrollTop: $(".input-div").offset().top - 20
        }, 200);
        playM3u8($("#str-post").serializeArray()[0].value);
        return false;
    })

    function isIframe() {
        if (self != top) {
            $('header,footer,.logo,.input-div,.am-text-right,.am-alert-secondary').remove();
            $('#player,.am-container,body,html').css({
                'height': '100%',
                'width': '100%',
            });
            $('.am-container').removeClass('am-container');
        }
    }
    isIframe();
    setTimeout(function() {
        isIframe();
    }, 1000)
    </script>
</body>

</html>